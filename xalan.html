<html>
<head>
	<script src="xalan.js"></script>

</head>
<body>
	<script>
		/* 
			this works in chrome and firefox
		*/
		console.log(new Date());
		console.log(convertDocbookToHTML("<section><title>hi</title></section>"));
		console.log(new Date());

		/*
			this results in a "Uncaught RangeError: Maximum call stack size exceeded" in chrome
		*/
		worker = new Worker("xalan.js");
		worker.addEventListener('message', function(e) {
			console.log(e.data);
			console.log(new Date());
		});
		worker.postMessage(
		"<section>" +
			"<title>This is a test topic</title>" +
			"<para>" +
				"I am a paragraph that exists in both revisions." +
			"</para>" +
			"<para>" +
				"test update 9" +
			"</para>" +
		"</section>");
	</script>
</body>
</html>
